% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ag501_to_ssff.R
\name{ag501_to_ssff}
\alias{ag501_to_ssff}
\title{ag501_to_ssff}
\usage{
ag501_to_ssff(filename, sensor_array, pal_filepath, pal_sensor, output_dir)
}
\arguments{
\item{filename}{file to process (Carstens AG501 .txt file, with header); assumes they have column names set by \code{\link{process_ag501}} and that the sampling rate of the EMA data is 250 Hz}

\item{sensor_array}{character array of sensor names to extract}

\item{pal_filepath}{filepath to speaker-specific palate trace file (currently assumes that it hasn't been through process_ag501 as it's typically not necessary to obtain derived variables for the palate trace - there assumes original Carstens column names; e.g. Ch1_X, ...)}

\item{pal_sensor}{number of sensor used for palate trace in pal_filepath file}

\item{output_dir}{directory to save output SSFF files for each sensor}
}
\description{
Converts processed AG501 file created by \code{\link{process_ag501}} to SSFF files
}
\details{
Takes an output file from the \code{\link{process_ag501}} function, loops over user-specified sensor_array, writes all data for a sensor to SSFF file. Also gets palate trace from a non-processed user-specified file. Writes one SSFF file per sensor channel + a file for lip aperture + a file for palate trace. The palate trace is written for each file for compatibility with EMU-webApp, where the palate trace needs to be specified for every token.
}
\note{
The wrassp library has a header size limit of 1kB, limiting the number of tracks that an SSFF file can contain when written to disk - this is a major reason why the \code{\link{ag501_to_ssff}} function writes one file per sensor, rather than writing all sensors inside one file. Note that it's the size of the header in memory that's the issue, so trackname length is more of a factor than the actual number of tracks, but you will hit the 1kB limit once you hit ~48 tracks, depending on track names. If this is a critical issue then you could fork the wrassp project and easily increase the header size in wrassp's \href{https://github.com/IPS-LMU/wrassp/blob/1411e0d4995d1f14b2c6f991e7b8194d9d8598ee/src/assp/headers.c#L2776}{headers.c} code (the link should take you to the specific line in question). Warning: the 1kB header size assumption also exists elsewhere in the wrassp library, so proceed with caution if you plan to change this!
}
\examples{
# To run on a single file
#' note the subset of sensor channels in 'sensors' - not all sensors are specified here as you often don't want all channels in the EMU database
\dontrun{
sensors <- c("TT", "TB", "TD", "LT", "UT", "UL", "LL")
ag501_to_ssff(filename = "sf2_0005.txt", sensor_array = sensors, pal_filepath = "sf2_palate.txt", pal_sensor = 15, output_dir = "path/to/dir")
}

# To run on a directory of files using lapply (not run)
#' note the subset of sensor channels in 'sensors' - not all sensors are specified here as you often don't want all channels in the EMU database
\dontrun{
files <- list.files("path/to/dir", pattern = "*.txt", full.names = TRUE)
sensors <- c("TT", "TB", "TD", "LT", "UT", "UL", "LL")
lapply(files, ag501_to_ssff, sensor_array = sensors, pal_filepath = "sf2_palate.txt", pal_sensor = 15, output_dir = "path/to/dir")
}

}
\author{
Sam Kirkham
}
